import{f as B,g as x,i as _}from"./chunk-UZ6V6X2Q.js";import{G as d,Ga as g,Ma as S,X as u,Y as i,Ya as b,ca as f,cb as I,fa as v,ia as r,ja as a,ka as l,kb as h,mb as y,nb as w,tb as R,xa as k,ya as m}from"./chunk-OW3CYLMD.js";function P(o,e){o&1&&(r(0,"div",3)(1,"h2"),m(2,"Book Not Found"),a(),r(3,"p"),m(4,"The book you're looking for doesn't exist."),a(),r(5,"a",4),m(6,"Return to Book List"),a()())}function V(o,e){o&1&&l(0,"app-book-view")}var n=class o{constructor(e,t,s,c,p){this.route=e;this.router=t;this.bookService=s;this.layoutService=c;this.storageService=p}bookNotFound=!1;ngOnInit(){let{id:e,contentId:t,interactionNum:s}=this.route.snapshot.params;t?(this.storageService.saveBookPosition(e,{contentId:t,interactionNum:s}),this.router.navigate(["/book",e])):this.bookService.books$.subscribe(c=>{let p=c.find(O=>O.id==e);p?(this.bookNotFound=!1,setTimeout(()=>this.bookService.setActiveBook(p))):this.bookNotFound=!0})}ngAfterViewInit(){setTimeout(()=>{this.layoutService.setLayoutMode("reader")})}ngOnDestroy(){this.layoutService.setLayoutMode("standard")}static \u0275fac=function(t){return new(t||o)(i(h),i(y),i(B),i(x),i(R))};static \u0275cmp=d({type:o,selectors:[["app-book-viewer"]],standalone:!0,features:[g],decls:4,vars:2,consts:[["found",""],[1,"book-viewer"],["class","book-not-found",4,"ngIf","ngIfElse"],[1,"book-not-found"],["routerLink","/"]],template:function(t,s){if(t&1&&(r(0,"div",1),f(1,P,7,0,"div",2)(2,V,1,0,"ng-template",null,0,S),a()),t&2){let c=k(3);u(),v("ngIf",s.bookNotFound)("ngIfElse",c)}},dependencies:[I,b,_,w],styles:[".book-viewer[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.book-viewer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;padding:20px}"]})};var $=[{path:":id",component:n},{path:":id/:contentId",component:n},{path:":id/:contentId/:interactionNum",component:n}];export{$ as BOOK_VIEWER_ROUTES,n as BookViewerPage};
