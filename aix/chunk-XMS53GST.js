import{f as _}from"./chunk-QXY2G2QR.js";import{e as B,f as x}from"./chunk-27OWOAZO.js";import{c as R}from"./chunk-ETBDGZQG.js";import{$a as S,Cb as h,Eb as w,Fb as y,La as k,Ma as m,P as d,Ua as g,ea as f,fa as i,la as u,mb as b,oa as v,sb as I,wa as r,xa as a,ya as l}from"./chunk-LTU5YACX.js";function P(o,e){o&1&&(r(0,"div",3)(1,"h2"),m(2,"Book Not Found"),a(),r(3,"p"),m(4,"The book you're looking for doesn't exist."),a(),r(5,"a",4),m(6,"Return to Book List"),a()())}function V(o,e){o&1&&l(0,"app-book-view")}var n=class o{constructor(e,t,c,s,p){this.route=e;this.router=t;this.bookService=c;this.layoutService=s;this.storageService=p}bookNotFound=!1;ngOnInit(){let{id:e,contentId:t,interactionNum:c}=this.route.snapshot.params;t?(this.storageService.saveBookPosition(e,{contentId:t,interactionNum:c}),this.router.navigate(["/book",e])):this.bookService.books$.subscribe(s=>{let p=s.find(O=>O.id==e);p?(this.bookNotFound=!1,setTimeout(()=>this.bookService.setActiveBook(p))):this.bookNotFound=!0})}ngAfterViewInit(){setTimeout(()=>{this.layoutService.setLayoutMode("reader")})}ngOnDestroy(){}static \u0275fac=function(t){return new(t||o)(i(h),i(w),i(B),i(x),i(R))};static \u0275cmp=d({type:o,selectors:[["app-book-viewer"]],standalone:!0,features:[g],decls:4,vars:2,consts:[["found",""],[1,"book-viewer"],["class","book-not-found",4,"ngIf","ngIfElse"],[1,"book-not-found"],["routerLink","/"]],template:function(t,c){if(t&1&&(r(0,"div",1),u(1,P,7,0,"div",2)(2,V,1,0,"ng-template",null,0,S),a()),t&2){let s=k(3);f(),v("ngIf",c.bookNotFound)("ngIfElse",s)}},dependencies:[I,b,_,y],styles:[".book-viewer[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.book-viewer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;padding:20px}"]})};var $=[{path:":id",component:n},{path:":id/:contentId",component:n},{path:":id/:contentId/:interactionNum",component:n}];export{$ as BOOK_VIEWER_ROUTES,n as BookViewerPage};
