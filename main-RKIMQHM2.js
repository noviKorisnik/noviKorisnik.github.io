import{a as Oe,b as Ee,c as we}from"./chunk-RFO65L5X.js";import{A as ve,Aa as Pe,Ba as ke,C as b,Ca as w,D as S,H as he,I as a,J as d,L as m,N as l,O as q,P as r,Q as o,R as U,S as se,T as ae,U as k,V as v,W as p,aa as Ce,ba as s,c as z,ca as F,d as de,da as C,e as me,ea as f,f as ue,ga as E,h as fe,ha as G,i as R,ia as le,ja as _e,ka as D,l as O,la as M,ma as K,na as xe,oa as _,qa as V,ra as Q,s as ge,sa as be,t as N,ta as Se,ua as ye,w as $,x as P,xa as Ie,y as u,ya as y,za as Me}from"./chunk-E2B7UCVL.js";var g=class t{constructor(i){this.http=i;this.checkAuthStatus().subscribe()}apiUrl=`${w.baseServerUrl}/auth`;userSubject=new ue(1);user$=this.userSubject.asObservable();checkAuthStatus(){return this.http.get(`${this.apiUrl}/session-status`,{withCredentials:!0}).pipe(ge(i=>{this.userSubject.next(i.user)}))}loginWithGithub(){window.location.href=w.auth.callbackPaths.github}loginWithMicrosoft(){window.location.href=w.auth.callbackPaths.microsoft}logout(){window.location.href=`${this.apiUrl}/logout`}isAuthenticated(){return new de(i=>{this.user$.subscribe(e=>{i.next(!!e)})})}static \u0275fac=function(e){return new(e||t)($(V))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};var X=class t{constructor(i,e){this.authService=i;this.router=e;this.authService.isAuthenticated().pipe(O(1)).subscribe(n=>{n&&this.router.navigate(["/profile"])})}loginWithGithub(){this.authService.loginWithGithub()}loginWithMicrosoft(){this.authService.loginWithMicrosoft()}static \u0275fac=function(e){return new(e||t)(d(g),d(y))};static \u0275cmp=u({type:t,selectors:[["app-login"]],standalone:!0,features:[f],decls:6,vars:0,consts:[[1,"login-container"],[1,"login-buttons"],[3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),s(2,"Login"),o(),r(3,"div",1)(4,"button",2),v("click",function(){return n.loginWithGithub()}),s(5,"Login with GitHub"),o()()())},styles:[".login-container[_ngcontent-%COMP%]{padding:2rem;text-align:center}.login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:300px;margin:0 auto}button[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}"]})};var B=class t{constructor(i,e){this.router=i;this.authService=e}ngOnInit(){return z(this,null,function*(){yield this.authService.checkAuthStatus(),this.router.navigate(["/profile"])})}static \u0275fac=function(e){return new(e||t)(d(y),d(g))};static \u0275cmp=u({type:t,selectors:[["app-callback"]],standalone:!0,features:[f],decls:2,vars:0,template:function(e,n){e&1&&(r(0,"div"),s(1,"Processing login..."),o())},encapsulation:2})};function De(t,i){if(t&1){let e=k();r(0,"div",1)(1,"h2"),s(2,"User Profile"),o(),r(3,"div",2)(4,"p")(5,"strong"),s(6,"Username:"),o(),s(7),o(),r(8,"p")(9,"strong"),s(10,"Provider:"),o(),s(11),o()(),r(12,"button",3),v("click",function(){b(e);let c=p();return S(c.logout())}),s(13,"Logout"),o()()}if(t&2){let e=i.ngIf;a(7),C(" ",e.username,""),a(4),C(" ",e.provider,"")}}var Y=class t{constructor(i){this.authService=i;this.user$=this.authService.user$}user$;logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||t)(d(g))};static \u0275cmp=u({type:t,selectors:[["app-profile"]],standalone:!0,features:[f],decls:2,vars:3,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-info"],[3,"click"]],template:function(e,n){e&1&&(m(0,De,14,2,"div",0),E(1,"async")),e&2&&l("ngIf",G(1,1,n.user$))},dependencies:[_,M,K],styles:[".profile-container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.profile-info[_ngcontent-%COMP%]{background:#f5f5f5;padding:1rem;border-radius:4px;margin:1rem 0}button[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}"]})};var T=(t,i)=>{let e=P(y);return P(g).isAuthenticated().pipe(O(1),R(c=>c?!0:e.createUrlTree(["/login"])))};function Ve(t){return typeof t=="object"&&typeof t.v=="string"&&typeof t.minReaderV=="string"&&typeof t.lexicalEditorState=="object"&&typeof t.lexicalEditorState.root=="object"}function Le(t){return typeof t=="object"&&t.speaker==="human"&&Array.isArray(t.contextFiles)&&Ve(t.editorState)&&typeof t.text=="string"}function He(t){return typeof t=="object"&&t.speaker==="assistant"&&typeof t.model=="string"&&typeof t.text=="string"}function ze(t){return typeof t=="object"&&Le(t.humanMessage)&&He(t.assistantMessage)}function Ge(t){return typeof t=="object"&&typeof t.id=="string"&&typeof t.lastInteractionTimestamp=="string"&&Array.isArray(t.interactions)&&t.interactions.every(ze)}function Ue(t){if(!Array.isArray(t))return{isValid:!1,error:"Root structure should be an array of chat sessions"};if(t.length===0)return{isValid:!1,error:"History must contain at least one chat session"};if(!t.every(Ge))return{isValid:!1,error:"Invalid chat session structure"};let e=t.some(n=>n.interactions&&n.interactions.length>0);return{isValid:e,error:e?void 0:"History must contain at least one session with interactions"}}var Z=class t{constructor(i){this.http=i}apiUrl=`${w.apiUrl}/upload`;chunkSize=1024*1024;uploadFile(i){console.log(`Starting upload of ${i.name}, size: ${i.size} bytes`);let e=Math.ceil(i.size/this.chunkSize);console.log(`Will be split into ${e} chunks of ${this.chunkSize} bytes each`);let n=new me,c=(x,H)=>z(this,null,function*(){console.log(`Uploading chunk ${H+1}/${e}, size: ${x.size} bytes`);let j=new FormData;return j.append("file",x,i.name),j.append("chunkIndex",H.toString()),j.append("totalChunks",e.toString()),fe(this.http.post(`${this.apiUrl}/chunk`,j,{withCredentials:!0,reportProgress:!0,observe:"events"}))});return z(this,null,function*(){for(let x=0;x<e;x++){let H=x*this.chunkSize,j=Math.min(H+this.chunkSize,i.size),$e=i.slice(H,j);yield c($e,x),n.next((x+1)/e*100)}n.complete()}),n.asObservable()}static \u0275fac=function(e){return new(e||t)($(V))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};function Be(t,i){if(t&1&&(r(0,"div",7),s(1),o()),t&2){let e=p();a(),F(e.error)}}function Je(t,i){if(t&1&&(r(0,"div",8),s(1),o()),t&2){let e=p();a(),F(e.successMessage)}}function qe(t,i){if(t&1&&(r(0,"div",9),s(1),o()),t&2){let e=p();a(),C(" Upload progress: ",e.uploadProgress,"% ")}}var ee=class t{constructor(i,e){this.uploadService=i;this.router=e}selectedFile=null;uploadProgress=0;error=null;successMessage=null;onFileSelected(i){let e=i.target.files[0];if(!e)return;if(e.type!=="application/json"&&!e.name.endsWith(".json")){this.error="Only JSON files are allowed",i.target.value=null;return}let n=new FileReader;n.onload=c=>{try{let h=JSON.parse(c.target?.result),x=Ue(h);x.isValid?(this.selectedFile=e,this.error=null):(this.selectedFile=null,this.error=x.error||null)}catch{this.error="Invalid JSON format",this.selectedFile=null}},n.readAsText(e)}onUpload(){this.selectedFile&&this.uploadService.uploadFile(this.selectedFile).subscribe({next:i=>{i===100?(this.successMessage="Upload successful! Redirecting to editorial...",setTimeout(()=>{this.router.navigate(["/editorial"])},2e3)):this.uploadProgress=i,this.error=null},error:i=>{console.error("Upload failed:",i),this.uploadProgress=0,this.error=i.error?.message||"Upload failed",this.successMessage=null}})}static \u0275fac=function(e){return new(e||t)(d(Z),d(y))};static \u0275cmp=u({type:t,selectors:[["app-upload"]],standalone:!0,features:[f],decls:10,vars:4,consts:[[1,"upload-container"],[1,"upload-area"],["type","file",3,"change"],[3,"click","disabled"],["class","error",4,"ngIf"],["class","success",4,"ngIf"],["class","progress",4,"ngIf"],[1,"error"],[1,"success"],[1,"progress"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),s(2,"Upload Files"),o(),r(3,"div",1)(4,"input",2),v("change",function(h){return n.onFileSelected(h)}),o(),r(5,"button",3),v("click",function(){return n.onUpload()}),s(6,"Upload"),o()(),m(7,Be,2,1,"div",4)(8,Je,2,1,"div",5)(9,qe,2,1,"div",6),o()),e&2&&(a(5),l("disabled",!n.selectedFile),a(2),l("ngIf",n.error),a(),l("ngIf",n.successMessage),a(),l("ngIf",n.uploadProgress))},dependencies:[_,M],styles:[".upload-container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:20px;text-align:center;margin:20px 0}.upload-area[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin-bottom:10px}.upload-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.upload-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.progress[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f8f9fa;border-radius:4px}.error[_ngcontent-%COMP%]{color:#dc3545;margin-top:10px;padding:10px;border-radius:4px;background-color:#f8d7da}.success[_ngcontent-%COMP%]{color:#28a745;margin-top:10px;padding:10px;border-radius:4px;background-color:#d4edda}"]})};var pe=()=>{let t=P(y);return P(g).user$.pipe(R(e=>e?.roles?.includes("content-creator")?!0:(t.navigate(["/"]),!1)))};function Ke(t,i){if(t&1){let e=k();r(0,"div",11),v("click",function(){let c=b(e).$implicit,h=p(2);return S(h.loadInteractions(c.id))}),r(1,"div",12)(2,"input",13),v("click",function(c){let h=b(e).$implicit,x=p(2);return S(x.toggleSelection(h.id,c))}),o(),r(3,"div",14)(4,"div",15),s(5),o(),r(6,"div",16),s(7),E(8,"date"),o(),r(9,"div",17),s(10),E(11,"date"),o()()()()}if(t&2){let e=i.$implicit,n=p(2);q("selected",n.selectedSessions.has(e.id))("active",n.selectedSessionId===e.id),a(2),l("checked",n.selectedSessions.has(e.id)),a(3),C("Session Id: ",e.id,""),a(2),C("Last interaction: ",le(8,8,e.lastInteractionTimestamp,"medium"),""),a(3),C("Created: ",le(11,11,e.createdAt,"medium"),"")}}function Qe(t,i){if(t&1&&(r(0,"div",9),m(1,Ke,12,14,"div",10),o()),t&2){let e=p();a(),l("ngForOf",e.sessions)}}function Xe(t,i){if(t&1&&U(0,"app-interaction-list",21),t&2){let e=p(2);l("sessionId",e.selectedSessionId)}}function Ye(t,i){t&1&&(r(0,"div",22),s(1," Loading interactions... "),o())}function Ze(t,i){if(t&1&&(r(0,"div",18)(1,"h3"),s(2,"Interactions"),o(),m(3,Xe,1,1,"app-interaction-list",19)(4,Ye,2,0,"div",20),o()),t&2){let e=p();a(3),l("ngIf",e.selectedSessionId),a(),l("ngIf",e.loadingInteractions)}}function et(t,i){if(t&1&&(r(0,"div",23),s(1),o()),t&2){let e=p();a(),F(e.error)}}function tt(t,i){t&1&&(r(0,"div",24),s(1,"Loading sessions..."),o())}var te=class t{constructor(i){this.editorialService=i}sessions=[];selectedSessions=new Set;currentInteractions=null;selectedSessionId=null;loading=!0;loadingInteractions=!1;error=null;currentPage=1;pageSize=10;Math=Math;ngOnInit(){this.loadCreatedSessions()}loadCreatedSessions(){this.editorialService.getCreatedSessions().subscribe({next:i=>{this.sessions=i,this.loading=!1,console.log("this.sessions",this.sessions)},error:i=>{this.error="Failed to load sessions",this.loading=!1}})}loadInteractions(i,e=1){this.loadingInteractions=!0,this.selectedSessionId=i}toggleSelection(i,e){e.stopPropagation(),this.selectedSessions.has(i)?this.selectedSessions.delete(i):this.selectedSessions.add(i)}selectAll(){this.selectedSessions.size===this.sessions.length?this.selectedSessions.clear():this.sessions.forEach(i=>this.selectedSessions.add(i.id))}updateStatus(i){if(this.selectedSessions.size===0)return;let e={sessionIds:Array.from(this.selectedSessions),status:i};this.editorialService.updateSessionsStatus(e).subscribe({next:()=>{this.loadCreatedSessions(),this.selectedSessions.clear(),this.currentInteractions=null,this.selectedSessionId=null},error:n=>{this.error=`Failed to ${i} sessions`}})}changePage(i){this.selectedSessionId&&(this.currentPage=i,this.loadInteractions(this.selectedSessionId,i))}static \u0275fac=function(e){return new(e||t)(d(Ee))};static \u0275cmp=u({type:t,selectors:[["app-editorial"]],standalone:!0,features:[f],decls:16,vars:9,consts:[["loadingTpl",""],[1,"editorial-container"],[1,"sessions-panel"],[1,"toolbar"],[3,"click"],[3,"click","disabled"],["class","sessions-list",4,"ngIf","ngIfElse"],["class","interactions-panel",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"sessions-list"],["class","session-item",3,"selected","active","click",4,"ngFor","ngForOf"],[1,"session-item",3,"click"],[1,"session-header"],["type","checkbox",3,"click","checked"],[1,"timestamp-info"],[1,"session-id"],[1,"last-interaction"],[1,"created"],[1,"interactions-panel"],[3,"sessionId",4,"ngIf"],["class","loading-interactions",4,"ngIf"],[3,"sessionId"],[1,"loading-interactions"],[1,"error-message"],[1,"loading"]],template:function(e,n){if(e&1){let c=k();r(0,"div",1)(1,"div",2)(2,"h2"),s(3,"Sessions for Review"),o(),r(4,"div",3)(5,"button",4),v("click",function(){return b(c),S(n.selectAll())}),s(6),o(),r(7,"button",5),v("click",function(){return b(c),S(n.updateStatus("approved"))}),s(8),o(),r(9,"button",5),v("click",function(){return b(c),S(n.updateStatus("rejected"))}),s(10),o()(),m(11,Qe,2,1,"div",6),o(),m(12,Ze,5,2,"div",7)(13,et,2,1,"div",8),o(),m(14,tt,2,0,"ng-template",null,0,_e)}if(e&2){let c=Ce(15);a(6),C(" ",n.selectedSessions.size===n.sessions.length?"Deselect All":"Select All"," "),a(),l("disabled",n.selectedSessions.size===0),a(),C(" Approve Selected (",n.selectedSessions.size,") "),a(),l("disabled",n.selectedSessions.size===0),a(),C(" Reject Selected (",n.selectedSessions.size,") "),a(),l("ngIf",!n.loading)("ngIfElse",c),a(),l("ngIf",n.selectedSessionId),a(),l("ngIf",n.error)}},dependencies:[_,D,M,xe,we],styles:[".editorial-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:20px;padding:20px;height:calc(100vh - 60px)}.sessions-panel[_ngcontent-%COMP%]{border-right:1px solid #ddd;padding-right:20px}.toolbar[_ngcontent-%COMP%]{margin:20px 0;display:flex;gap:10px}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.sessions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;overflow-y:auto;max-height:calc(100vh - 200px)}.session-item[_ngcontent-%COMP%]{padding:15px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.session-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.session-item.selected[_ngcontent-%COMP%]{border-color:#007bff;background-color:#e7f1ff}.session-item.active[_ngcontent-%COMP%]{border-color:#28a745;border-width:2px}.session-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.interactions-panel[_ngcontent-%COMP%]{overflow-y:auto;padding:20px;background:#f8f9fa;border-radius:4px}.interaction-item[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background:#fff;border-radius:4px;box-shadow:0 1px 3px #0000001a}.interaction-item[_ngcontent-%COMP%]   .human-message[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #eee}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;margin-top:20px;padding:10px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#eee;cursor:not-allowed}.loading[_ngcontent-%COMP%], .loading-interactions[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}.error-message[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;color:#dc3545;padding:10px 20px;background-color:#f8d7da;border-radius:4px;box-shadow:0 2px 4px #0000001a}.timestamp-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;font-size:.9em}.timestamp-info[_ngcontent-%COMP%]   .last-interaction[_ngcontent-%COMP%]{color:#666}.timestamp-info[_ngcontent-%COMP%]   .created[_ngcontent-%COMP%]{color:#888;font-size:.9em}"]})};var L=class t{constructor(i){this.http=i}apiUrl=`${w.apiUrl}/admin`;getUsers(){return this.http.get(`${this.apiUrl}/users`,{withCredentials:!0})}assignRole(i,e){return this.http.post(`${this.apiUrl}/users/${i}/roles/${e}`,{},{withCredentials:!0})}removeRole(i,e){return this.http.delete(`${this.apiUrl}/users/${i}/roles/${e}`,{withCredentials:!0})}static \u0275fac=function(e){return new(e||t)($(V))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};function it(t,i){if(t&1){let e=k();r(0,"div",2)(1,"label")(2,"input",3),v("change",function(){let c=b(e).$implicit,h=p();return S(h.toggleRole(c))}),o(),s(3),o()()}if(t&2){let e=i.$implicit,n=p();a(),q("disabled",n.isDisabled(e)),a(),l("checked",n.user.roles==null?null:n.user.roles.includes(e))("disabled",n.isDisabled(e)),a(),C(" ",e," ")}}var ie=class t{constructor(i,e){this.adminService=i;this.authService=e;this.authService.user$.pipe(O(1)).subscribe(n=>{this.currentUser=n})}user;availableRoles=["administrator","content-editor","content-creator"];currentUser=null;isDisabled(i){return i==="administrator"&&this.user.uid===this.currentUser?.uid}toggleRole(i){this.isDisabled(i)||(this.user.roles?.includes(i)?this.adminService.removeRole(this.user.uid,i).subscribe(()=>{this.user.roles=this.user.roles?.filter(e=>e!==i)}):this.adminService.assignRole(this.user.uid,i).subscribe(()=>{this.user.roles||(this.user.roles=[]),this.user.roles.push(i)}))}static \u0275fac=function(e){return new(e||t)(d(L),d(g))};static \u0275cmp=u({type:t,selectors:[["app-role-management"]],inputs:{user:"user"},standalone:!0,features:[f],decls:2,vars:1,consts:[[1,"role-controls"],["class","role-toggle",4,"ngFor","ngForOf"],[1,"role-toggle"],["type","checkbox",3,"change","checked","disabled"]],template:function(e,n){e&1&&(r(0,"div",0),m(1,it,4,5,"div",1),o()),e&2&&(a(),l("ngForOf",n.availableRoles))},dependencies:[_,D],styles:[".role-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.5rem}.role-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.role-toggle[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.7}"]})};function nt(t,i){if(t&1&&(r(0,"div",4)(1,"span"),s(2),o(),U(3,"app-role-management",5),o()),t&2){let e=i.$implicit;a(2),F(e.username),a(),l("user",e)}}function ot(t,i){if(t&1&&(r(0,"div",2),m(1,nt,4,2,"div",3),o()),t&2){let e=p();a(),l("ngForOf",e.users)}}var ne=class t{constructor(i){this.adminService=i}users=[];ngOnInit(){this.loadUsers()}loadUsers(){this.adminService.getUsers().subscribe(i=>{this.users=i})}static \u0275fac=function(e){return new(e||t)(d(L))};static \u0275cmp=u({type:t,selectors:[["app-user-list"]],standalone:!0,features:[f],decls:4,vars:1,consts:[[1,"user-list"],["class","users",4,"ngIf"],[1,"users"],["class","user",4,"ngFor","ngForOf"],[1,"user"],[3,"user"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),s(2,"User Management"),o(),m(3,ot,2,1,"div",1),o()),e&2&&(a(3),l("ngIf",n.users))},dependencies:[_,D,M,ie],styles:[".user-list[_ngcontent-%COMP%]{padding:1rem}.user[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem;border-bottom:1px solid #eee}"]})};var Te=(t,i)=>{let e=P(y);return P(g).user$.pipe(O(1),R(c=>c?.roles?.includes("administrator")?!0:e.createUrlTree(["/login"])))};var je=[{path:"",loadChildren:()=>import("./chunk-IIR7QH7F.js").then(t=>t.routes),canActivate:[T],pathMatch:"full"},{path:"session",loadChildren:()=>import("./chunk-I4MBAUIG.js").then(t=>t.routes),canActivate:[T]},{path:"login",component:X},{path:"profile",component:Y,canActivate:[T]},{path:"upload",component:ee,canActivate:[T,pe]},{path:"editorial",component:te,canActivate:[T,pe]},{path:"auth/github/callback",component:B},{path:"auth/microsoft/callback",component:B},{path:"admin/users",component:ne,canActivate:[T,Te]}];var Re=(t,i)=>{let e=t.clone({withCredentials:!0});return i(e)};var Ne={providers:[Pe(je),Q(Se(),be([Re]))]};function rt(t,i){t&1&&(r(0,"a",6),s(1,"Upload"),o())}function st(t,i){t&1&&(r(0,"a",7),s(1,"Admin"),o())}function at(t,i){if(t&1){let e=k();se(0),r(1,"a",2),s(2,"Profile"),o(),m(3,rt,2,0,"a",3)(4,st,2,0,"a",4),r(5,"a",5),v("click",function(){b(e);let c=p();return S(c.auth.logout())}),s(6,"Logout"),o(),ae()}if(t&2){let e=i.ngIf;a(3),l("ngIf",e.roles==null?null:e.roles.includes("content-creator")),a(),l("ngIf",e.roles==null?null:e.roles.includes("administrator"))}}function lt(t,i){t&1&&(se(0),r(1,"a",8),s(2,"Login"),o(),ae())}var oe=class t{constructor(i){this.auth=i}static \u0275fac=function(e){return new(e||t)(d(g))};static \u0275cmp=u({type:t,selectors:[["app-nav"]],standalone:!0,features:[f],decls:7,vars:6,consts:[["routerLink","/"],[4,"ngIf"],["routerLink","/profile"],["routerLink","/upload",4,"ngIf"],["routerLink","/admin/users",4,"ngIf"],[3,"click"],["routerLink","/upload"],["routerLink","/admin/users"],["routerLink","/login"]],template:function(e,n){e&1&&(r(0,"nav")(1,"a",0),s(2,"Home"),o(),m(3,at,7,2,"ng-container",1),E(4,"async"),m(5,lt,3,0,"ng-container",1),E(6,"async"),o()),e&2&&(a(3),l("ngIf",G(4,2,n.auth.user$)),a(2),l("ngIf",!G(6,4,n.auth.user$)))},dependencies:[_,M,K,ke,Me],styles:["nav[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:1rem;text-decoration:none;color:#333;cursor:pointer}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var re=class t{title="client";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-root"]],standalone:!0,features:[f],decls:7,vars:0,template:function(e,n){e&1&&(r(0,"header")(1,"h1"),s(2,"Chat History Browser"),o(),r(3,"nav"),U(4,"app-nav"),o()(),r(5,"main"),U(6,"router-outlet"),o())},dependencies:[_,Ie,oe]})};ye(re,{providers:[ve(Oe.forRoot({sanitize:he.NONE})),Q(),...Ne.providers]}).catch(t=>console.error(t));
